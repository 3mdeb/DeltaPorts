--- rtl/Makefile.orig	2014-02-25 11:05:54.000000000 +0000
+++ rtl/Makefile
@@ -2,8 +2,8 @@
 # Don't edit, this file is generated by FPCMake Version 2.0.0 [2013/10/30]
 #
 default: all
-MAKEFILETARGETS=i386-linux i386-go32v2 i386-win32 i386-os2 i386-freebsd i386-beos i386-haiku i386-netbsd i386-solaris i386-qnx i386-netware i386-openbsd i386-wdosx i386-darwin i386-emx i386-watcom i386-netwlibc i386-wince i386-embedded i386-symbian i386-nativent i386-iphonesim m68k-linux m68k-freebsd m68k-netbsd m68k-amiga m68k-atari m68k-openbsd m68k-palmos m68k-embedded powerpc-linux powerpc-netbsd powerpc-amiga powerpc-macos powerpc-darwin powerpc-morphos powerpc-embedded powerpc-wii sparc-linux sparc-netbsd sparc-solaris sparc-embedded x86_64-linux x86_64-freebsd x86_64-netbsd x86_64-solaris x86_64-openbsd x86_64-darwin x86_64-win64 x86_64-embedded arm-linux arm-palmos arm-darwin arm-wince arm-gba arm-nds arm-embedded arm-symbian powerpc64-linux powerpc64-darwin powerpc64-embedded avr-embedded armeb-linux armeb-embedded mipsel-linux
-BSDs = freebsd netbsd openbsd darwin
+MAKEFILETARGETS=i386-linux i386-go32v2 i386-win32 i386-os2 i386-freebsd i386-beos i386-haiku i386-netbsd i386-solaris i386-qnx i386-netware i386-openbsd i386-wdosx i386-darwin i386-emx i386-watcom i386-netwlibc i386-wince i386-embedded i386-symbian i386-nativent i386-iphonesim m68k-linux m68k-freebsd m68k-netbsd m68k-amiga m68k-atari m68k-openbsd m68k-palmos m68k-embedded powerpc-linux powerpc-netbsd powerpc-amiga powerpc-macos powerpc-darwin powerpc-morphos powerpc-embedded powerpc-wii sparc-linux sparc-netbsd sparc-solaris sparc-embedded x86_64-linux x86_64-dragonfly x86_64-freebsd x86_64-netbsd x86_64-solaris x86_64-openbsd x86_64-darwin x86_64-win64 x86_64-embedded arm-linux arm-palmos arm-darwin arm-wince arm-gba arm-nds arm-embedded arm-symbian powerpc64-linux powerpc64-darwin powerpc64-embedded avr-embedded armeb-linux armeb-embedded mipsel-linux
+BSDs = freebsd netbsd openbsd darwin dragonfly
 UNIXs = linux $(BSDs) solaris qnx haiku
 LIMIT83fs = go32v2 os2 emx watcom
 OSNeedsComspecToRunBatch = go32v2 watcom
@@ -408,6 +408,9 @@ endif
 ifeq ($(FULL_TARGET),x86_64-freebsd)
 override TARGET_DIRS+=freebsd
 endif
+ifeq ($(FULL_TARGET),x86_64-dragonfly)
+override TARGET_DIRS+=dragonfly
+endif
 ifeq ($(FULL_TARGET),x86_64-netbsd)
 override TARGET_DIRS+=netbsd
 endif
@@ -713,6 +716,12 @@ EXEEXT=
 HASSHAREDLIB=1
 SHORTSUFFIX=fbs
 endif
+ifeq ($(OS_TARGET),dragonfly)
+BATCHEXT=.sh
+EXEEXT=
+HASSHAREDLIB=1
+SHORTSUFFIX=df
+endif
 ifeq ($(OS_TARGET),netbsd)
 BATCHEXT=.sh
 EXEEXT=
@@ -1183,7 +1192,7 @@ override FPCOPT+=-Aas
 endif
 endif
 ifeq ($(findstring 2.0.,$(FPC_VERSION)),)
-ifneq ($(findstring $(OS_TARGET),freebsd openbsd netbsd linux solaris),)
+ifneq ($(findstring $(OS_TARGET),dragonfly freebsd openbsd netbsd linux solaris),)
 ifeq ($(CPU_TARGET),x86_64)
 override FPCOPT+=-Cg
 endif
@@ -1686,6 +1695,9 @@ endif
 ifeq ($(FULL_TARGET),x86_64-freebsd)
 TARGET_DIRS_FREEBSD=1
 endif
+ifeq ($(FULL_TARGET),x86_64-dragonfly)
+TARGET_DIRS_DRAGONFLY=1
+endif
 ifeq ($(FULL_TARGET),x86_64-netbsd)
 TARGET_DIRS_NETBSD=1
 endif
@@ -1974,6 +1986,51 @@ freebsd:
 	$(MAKE) -C freebsd all
 .PHONY: freebsd_all freebsd_debug freebsd_smart freebsd_release freebsd_units freebsd_examples freebsd_shared freebsd_install freebsd_sourceinstall freebsd_exampleinstall freebsd_distinstall freebsd_zipinstall freebsd_zipsourceinstall freebsd_zipexampleinstall freebsd_zipdistinstall freebsd_clean freebsd_distclean freebsd_cleanall freebsd_info freebsd_makefiles freebsd
 endif
+ifdef TARGET_DIRS_DRAGONFLY
+dragonfly_all:
+	$(MAKE) -C dragonfly all
+dragonfly_debug:
+	$(MAKE) -C dragonfly debug
+dragonfly_smart:
+	$(MAKE) -C dragonfly smart
+dragonfly_release:
+	$(MAKE) -C dragonfly release
+dragonfly_units:
+	$(MAKE) -C dragonfly units
+dragonfly_examples:
+	$(MAKE) -C dragonfly examples
+dragonfly_shared:
+	$(MAKE) -C dragonfly shared
+dragonfly_install:
+	$(MAKE) -C dragonfly install
+dragonfly_sourceinstall:
+	$(MAKE) -C dragonfly sourceinstall
+dragonfly_exampleinstall:
+	$(MAKE) -C dragonfly exampleinstall
+dragonfly_distinstall:
+	$(MAKE) -C dragonfly distinstall
+dragonfly_zipinstall:
+	$(MAKE) -C dragonfly zipinstall
+dragonfly_zipsourceinstall:
+	$(MAKE) -C dragonfly zipsourceinstall
+dragonfly_zipexampleinstall:
+	$(MAKE) -C dragonfly zipexampleinstall
+dragonfly_zipdistinstall:
+	$(MAKE) -C dragonfly zipdistinstall
+dragonfly_clean:
+	$(MAKE) -C dragonfly clean
+dragonfly_distclean:
+	$(MAKE) -C dragonfly distclean
+dragonfly_cleanall:
+	$(MAKE) -C dragonfly cleanall
+dragonfly_info:
+	$(MAKE) -C dragonfly info
+dragonfly_makefiles:
+	$(MAKE) -C dragonfly makefiles
+dragonfly:
+	$(MAKE) -C dragonfly all
+.PHONY: dragonfly_all dragonfly_debug dragonfly_smart dragonfly_release dragonfly_units dragonfly_examples dragonfly_shared dragonfly_install dragonfly_sourceinstall dragonfly_exampleinstall dragonfly_distinstall dragonfly_zipinstall dragonfly_zipsourceinstall dragonfly_zipexampleinstall dragonfly_zipdistinstall dragonfly_clean dragonfly_distclean dragonfly_cleanall dragonfly_info dragonfly_makefiles dragonfly
+endif
 ifdef TARGET_DIRS_BEOS
 beos_all:
 	$(MAKE) -C beos all

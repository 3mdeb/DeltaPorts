--- bsd.mesalib.mk.orig	2012-11-17 06:58:12.000000000 +0100
+++ bsd.mesalib.mk	2013-01-16 12:05:46.425509000 +0100
@@ -72,13 +72,14 @@
 ALL_TARGET=		default
 
 PATCHDIR=		${.CURDIR}/../../graphics/libGL/files
+DFLY_PATCHDIR=		${.CURDIR}/../../graphics/libGL/dragonfly
 WRKSRC=			${WRKDIR}/Mesa-${MESABASEVERSION}${MESASUBVERSION}
 
 .if !defined(ARCH)
 ARCH!=			uname -p
 .endif
 
-COMPONENT=		${PORTNAME:L:C/^lib//:C/mesa-//}
+COMPONENT=		${PORTNAME:tl:C/^lib//:C/mesa-//}
 
 .if ${COMPONENT:Mglu} == ""
 CONFIGURE_ARGS+=	--disable-glu
@@ -101,8 +102,6 @@
 .endif
 
 post-patch:
-	@${REINPLACE_CMD} -e 's|-ffast-math|${FAST_MATH}|' -e 's|x86_64|amd64|' \
-		-e 's|-lpthread|${PTHREAD_LIBS}|g' ${WRKSRC}/configure
 	@${REINPLACE_CMD} -e 's|[$$](INSTALL_LIB_DIR)/pkgconfig|${PREFIX}/libdata/pkgconfig|' \
 		${WRKSRC}/src/glu/Makefile \
 		${WRKSRC}/src/glw/Makefile \
